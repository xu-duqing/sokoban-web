{
  "project": "Sokoban Web Game",
  "branchName": "ralph/sokoban-game",
  "description": "基于 HTML5 Canvas 的 2D 推箱子网页游戏，支持多关卡、撤销功能和键盘操作",
  "userStories": [
    {
      "id": "US-001",
      "title": "项目初始化和基础结构",
      "description": "作为开发者，我需要搭建项目基础结构，包括目录结构、配置文件和依赖管理",
      "acceptanceCriteria": [
        "创建完整的项目目录结构（public/, src/, tests/, ralph/）",
        "初始化 package.json",
        "配置 ESLint",
        "配置 Jest 测试框架",
        "创建 .gitignore 文件",
        "创建基础 HTML 模板",
        "Typecheck passes（使用 JSDoc）",
        "Tests pass"
      ],
      "priority": 1,
      "passes": true,
      "notes": "完成于 2026-02-25 19:20"
    },
    {
      "id": "US-002",
      "title": "关卡数据结构和解析器",
      "description": "作为开发者，我需要设计关卡数据结构并实现地图解析器，将文本地图转换为游戏对象",
      "acceptanceCriteria": [
        "设计关卡数据结构（地图、墙壁、箱子、玩家、目标）",
        "实现地图文本解析器（支持 #, @, $, ., *, + 符号）",
        "创建至少 2 个测试关卡",
        "编写单元测试验证解析正确性",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 2,
      "passes": true,
      "notes": "完成于 2026-02-25 19:20（在 US-001 中实现）"
    },
    {
      "id": "US-003",
      "title": "游戏逻辑引擎（移动和碰撞）",
      "description": "作为玩家，我可以通过键盘控制角色移动，推动箱子，并有准确的碰撞检测",
      "acceptanceCriteria": [
        "实现玩家移动逻辑（上、下、左、右）",
        "实现箱子推动逻辑（一次推一个）",
        "实现碰撞检测（墙壁、其他箱子）",
        "实现胜利条件判断（所有箱子到目标位置）",
        "步数计数器",
        "编写单元测试覆盖所有场景",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 3,
      "passes": true,
      "notes": "完成于 2026-02-25 19:20（在 US-001 中实现，单元测试已通过）"
    },
    {
      "id": "US-004",
      "title": "Canvas 渲染引擎",
      "description": "作为玩家，我可以看到清晰的 2D 游戏画面，网格清晰，元素可识别",
      "acceptanceCriteria": [
        "实现 Canvas 渲染循环",
        "绘制墙壁、玩家、箱子、目标位置",
        "绘制高亮状态（箱子在目标位置）",
        "响应式布局（适配不同屏幕尺寸）",
        "使用 requestAnimationFrame（60 FPS）",
        "Typecheck passes",
        "Tests pass",
        "Verify in browser: 用 browser tool 打开页面验证渲染效果"
      ],
      "priority": 4,
      "passes": true,
      "notes": "完成于 2026-02-25 19:20（在 US-001 中实现，已在浏览器验证）"
    },
    {
      "id": "US-005",
      "title": "UI 界面和控制",
      "description": "作为玩家，我可以通过界面按钮或键盘操作游戏，查看步数和重置关卡",
      "acceptanceCriteria": [
        "实现步数显示",
        "实现重置关卡按钮",
        "实现下一关按钮（胜利后）",
        "实现操作说明显示",
        "键盘事件监听（方向键/WASD）",
        "Typecheck passes",
        "Tests pass",
        "Verify in browser: 用 browser tool 验证 UI 交互"
      ],
      "priority": 5,
      "passes": true,
      "notes": "完成于 2026-02-25 19:20（在 US-001 中实现，已在浏览器验证）"
    },
    {
      "id": "US-006",
      "title": "关卡选择界面",
      "description": "作为玩家，我可以在主菜单选择不同的关卡进行游戏",
      "acceptanceCriteria": [
        "实现关卡列表显示",
        "显示关卡完成状态",
        "点击切换关卡",
        "关卡预览（可选）",
        "Typecheck passes",
        "Tests pass",
        "Verify in browser: 用 browser tool 验证关卡选择功能"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-007",
      "title": "撤销功能",
      "description": "作为玩家，我可以撤销最近 10 步操作，避免失误",
      "acceptanceCriteria": [
        "实现撤销历史栈（最多 10 步）",
        "每一步记录游戏状态",
        "撤销按钮或快捷键（Ctrl+Z）",
        "撤销后正确恢复游戏状态",
        "编写单元测试",
        "Typecheck passes",
        "Tests pass",
        "Verify in browser: 用 browser tool 验证撤销功能"
      ],
      "priority": 7,
      "passes": true,
      "notes": "完成于 2026-02-25 19:20（在 US-001 中实现，单元测试已通过）"
    },
    {
      "id": "US-008",
      "title": "设计 5 个完整关卡",
      "description": "作为玩家，我至少有 5 个关卡可以挑战，难度逐渐递增",
      "acceptanceCriteria": [
        "设计并实现 5 个关卡",
        "关卡 1-3 简单（入门）",
        "关卡 4-5 中等（进阶）",
        "每个关卡可通关",
        "关卡有合理难度梯度",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 8,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-009",
      "title": "进度保存和加载",
      "description": "作为玩家，我的关卡进度会被保存，下次打开游戏可以继续",
      "acceptanceCriteria": [
        "使用 localStorage 保存进度",
        "保存已完成的关卡 ID",
        "加载时恢复进度",
        "清除进度功能（重置按钮）",
        "编写单元测试",
        "Typecheck passes",
        "Tests pass",
        "Verify in browser: 用 browser tool 验证存取档功能"
      ],
      "priority": 9,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-010",
      "title": "集成测试和优化",
      "description": "作为质量保证，我需要确保游戏稳定运行，性能良好",
      "acceptanceCriteria": [
        "编写端到端测试（完整游戏流程）",
        "测试所有功能正常工作",
        "性能优化（确保 60 FPS）",
        "浏览器兼容性测试",
        "代码覆盖率 ≥ 80%",
        "ESLint 无警告",
        "Typecheck passes",
        "Tests pass",
        "Verify in browser: 用 browser tool 完整通关游戏"
      ],
      "priority": 10,
      "passes": false,
      "notes": ""
    }
  ],
  "knownIssues": [],
  "testResults": {
    "lastRun": "2026-02-25 20:10",
    "status": "in-progress",
    "summary": "5/10 用户故事已完成，剩余 US-006, US-008, US-009, US-010",
    "logs": [
      "✅ US-001: 项目初始化和基础结构",
      "✅ US-002: 关卡数据结构和解析器",
      "✅ US-003: 游戏逻辑引擎（移动和碰撞）",
      "✅ US-004: Canvas 渲染引擎",
      "✅ US-005: UI 界面和控制",
      "✅ US-007: 撤销功能"
    ]
  }
}